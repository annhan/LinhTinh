http://www.humblecoder.com/arduino-multitasking-using-finite-state-machines/